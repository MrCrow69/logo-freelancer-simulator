<!DOCTYPE html>
<html lang="en">
<head>
<script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Logo Freelancer Simulator</title>
<style>
  /* Reset and base */
  * {
    box-sizing: border-box;
  }
  body {
    margin: 0;
    font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
    background: linear-gradient(135deg, #091426, #001f5b);
    color: #dce8ff;
    overflow-x: hidden;
    user-select: none;
  }
  header {
    background: linear-gradient(90deg, #005aff, #0a0f1f);
    padding: 0.8em 1.2em;
    display: flex;
    justify-content: center;
    gap: 1.5em;
    align-items: center;
  }
  header h1.logo {
    color: #fff;
    font-weight: 900;
    font-size: 1.7rem;
    letter-spacing: 0.1em;
    margin-right: 2em;
    user-select: text;
  }
  nav {
    display: flex;
    gap: 1em;
    align-items: center;
  }
  button.tab-btn {
    background: none;
    border: none;
    color: #c0d9ff;
    font-weight: 600;
    font-size: 1rem;
    cursor: pointer;
    padding: 0.6em 1.2em;
    border-radius: 12px;
    display: flex;
    align-items: center;
    gap: 0.5em;
    transition: 
      color 0.3s ease, 
      background-color 0.3s ease, 
      box-shadow 0.3s ease,
      transform 0.15s ease;
    user-select: none;
  }
  button.tab-btn:focus {
    outline: none;
    box-shadow: none;
  }
  button.tab-btn:hover:not(.active) {
    color: #00bbff;
  }
  button.tab-btn.active {
    color: #00e0ff;
    background: rgba(0, 224, 255, 0.15);
    box-shadow: 0 0 15px #00e0ffaa;
    transform: translateY(-2px);
  }
  main#content {
    padding: 1.5em 2em;
    min-height: 420px;
    font-size: 1rem;
    font-weight: 400;
    background: rgba(5, 10, 25, 0.5);
    margin: 1em 2em;
    border-radius: 16px;
    box-shadow: 0 0 30px #004b9b66 inset;
    user-select: text;
    transition: opacity 0.4s ease;
  }

  /* Icons for tabs */
  .tab-icon {
    width: 18px;
    height: 18px;
    fill: #c0d9ff;
    transition: fill 0.3s ease;
  }
  button.tab-btn.active .tab-icon {
    fill: #00e0ff;
  }

  /* Stats panel fixed bottom-left */
  #stats-panel {
    position: fixed;
    bottom: 15px;
    left: 15px;
    background: rgba(0, 224, 255, 0.15);
    color: #00e0ff;
    padding: 1em 1.3em;
    border-radius: 20px;
    font-weight: 700;
    font-size: 0.95rem;
    box-shadow: 0 0 15px #00e0ffcc;
    user-select: none;
    width: 220px;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  }

  /* Notifications container */
  #notifications {
    position: fixed;
    bottom: 1em;
    right: 1em;
    max-width: 320px;
    display: flex;
    flex-direction: column;
    gap: 0.5em;
    z-index: 1100;
  }
  /* Notification boxes */
  .notification {
    background: rgba(255, 255, 255, 0.1);
    border-radius: 15px;
    padding: 0.8em 1.2em;
    color: #e0f7ff;
    box-shadow: 0 0 15px 2px rgba(255, 255, 255, 0.3);
    font-weight: 600;
    font-size: 0.9rem;
    cursor: pointer;
    backdrop-filter: blur(10px);
    transition: opacity 0.7s ease;
    user-select: none;
    position: relative;
  }
  .notification:hover {
    box-shadow: 0 0 22px 4px #00e0ffcc;
    color: #00e0ff;
  }
  .notification .close-btn {
    position: absolute;
    top: 8px;
    right: 12px;
    background: transparent;
    border: none;
    color: #aaddffcc;
    font-weight: 700;
    font-size: 1.1rem;
    cursor: pointer;
    user-select: none;
  }
  .notification .close-btn:hover {
    color: #00e0ff;
  }

  /* Admin login modal */
  .modal {
    position: fixed;
    top: 0; left: 0; right: 0; bottom: 0;
    background: rgba(10, 15, 30, 0.85);
    backdrop-filter: blur(12px);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 1200;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.3s ease;
  }
  .modal.active {
    opacity: 1;
    pointer-events: auto;
  }
  .modal-content {
    background: #13203d;
    padding: 2.5em 3em;
    border-radius: 16px;
    width: 420px;
    box-shadow: 0 0 30px #00e0ffbb;
    color: #cceeff;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    position: relative;
  }
  .modal-content h2 {
    margin-top: 0;
    font-weight: 900;
    font-size: 1.7rem;
    color: #00e0ff;
    text-align: center;
  }
  .modal-content form {
    margin-top: 1.5em;
  }
  .modal-content input[type="password"] {
    width: 100%;
    padding: 0.7em 1em;
    font-size: 1.1rem;
    border: none;
    border-radius: 12px;
    background-color: #0f1a2e;
    color: #dce8ff;
    font-weight: 600;
    letter-spacing: 0.12em;
    font-family: monospace;
    box-shadow: inset 0 0 6px #004b9b;
    transition: box-shadow 0.25s ease;
  }
  .modal-content input[type="password"]:focus {
    outline: none;
    box-shadow: 0 0 14px #00e0ff;
  }
  .checkbox-wrapper {
    margin-top: 1em;
    display: flex;
    align-items: center;
    gap: 0.6em;
    font-weight: 600;
    color: #88ccffcc;
    user-select: none;
  }
  .checkbox-wrapper input[type="checkbox"] {
    width: 18px;
    height: 18px;
    accent-color: #00e0ff;
    cursor: pointer;
  }
  .modal-buttons {
    margin-top: 1.8em;
    display: flex;
    justify-content: space-between;
  }
  .btn {
    background-color: #005aff;
    border: none;
    color: white;
    padding: 0.8em 1.8em;
    border-radius: 12px;
    cursor: pointer;
    font-weight: 700;
    font-size: 1.1rem;
    transition: background-color 0.3s ease;
  }
  .btn:hover {
    background-color: #00bbff;
  }
  .btn-cancel {
    background-color: #222;
  }
  .btn-cancel:hover {
    background-color: #444;
  }

  /* NEW Admin Panel Modal (after login) */
  #admin-panel {
    position: fixed;
    top: 0; left: 0; right: 0; bottom: 0;
    background: rgba(10, 15, 30, 0.85);
    backdrop-filter: blur(10px);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 1300;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.3s ease;
  }
  #admin-panel.active {
    opacity: 1;
    pointer-events: auto;
  }
  #admin-panel .admin-content {
    background: #0a1430;
    padding: 2rem 3rem;
    border-radius: 15px;
    box-shadow: 0 0 25px #00e0ffcc;
    color: #00e0ff;
    width: 350px;
    display: flex;
    flex-direction: column;
    gap: 1rem;
  }
  #admin-panel button {
    padding: 0.8em 1.2em;
    font-weight: bold;
    font-size: 1rem;
    border: none;
    border-radius: 10px;
    background-color: #004b9b;
    color: white;
    cursor: pointer;
    transition: background-color 0.3s ease;
  }
  #admin-panel button:hover {
    background-color: #00aaff;
  }
  #global-msg-input-container {
    display: none;
    margin-top: 10px;
  }
  #global-msg-input {
    width: 100%;
    padding: 0.6em 0.8em;
    font-size: 1rem;
    border-radius: 8px;
    border: none;
    box-shadow: inset 0 0 8px #007bff;
    color: #00e0ff;
    background-color: #001528;
  }
</style>
</head>
<body>

<header>
  <h1 class="logo" aria-label="Logo Freelancer Simulator">LFS</h1>
  <nav>
    <button class="tab-btn active" data-tab="inbox" aria-current="page" aria-label="Inbox">
      <svg class="tab-icon" viewBox="0 0 24 24" aria-hidden="true"><path d="M20 6h-4l-2-2H10L8 6H4v12h16z"/></svg> Inbox
    </button>
    <button class="tab-btn" data-tab="store" aria-label="Store">
      <svg class="tab-icon" viewBox="0 0 24 24" aria-hidden="true"><path d="M3 9h18v11H3z"/></svg> Store
    </button>
    <button class="tab-btn" data-tab="projects" aria-label="Projects">
      <svg class="tab-icon" viewBox="0 0 24 24" aria-hidden="true"><path d="M12 2L2 7v7c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V7z"/></svg> Projects
    </button>
    <button class="tab-btn" data-tab="reviews" aria-label="Reviews">
      <svg class="tab-icon" viewBox="0 0 24 24" aria-hidden="true"><path d="M12 17.27L18.18 21 16.54 13.97 22 9.24l-7.19-.62L12 2 9.19 8.62 2 9.24l5.46 4.73L5.82 21z"/></svg> Reviews
    </button>
    <button class="tab-btn" data-tab="settings" aria-label="Settings">
      <svg class="tab-icon" viewBox="0 0 24 24" aria-hidden="true"><path d="M12 8a4 4 0 0 0 0 8 4 4 0 0 0 0-8zm0 10a8 8 0 0 1-6.32-3.16l1.42-1.42A6 6 0 0 0 12 16a6 6 0 0 0 4.9-2.58l1.42 1.42A8 8 0 0 1 12 18z"/></svg> Settings
    </button>
  </nav>
</header>

<main id="content" role="main" tabindex="0" aria-live="polite" aria-atomic="true">
  Loading Inbox content...
</main>

<!-- Stats Panel bottom-left -->
<div id="stats-panel" aria-label="Player stats">
  <div><strong>Projects Completed:</strong> 0</div>
  <div><strong>Reputation:</strong> 0</div>
  <div><strong>Balance:</strong> $0</div>
</div>

<!-- Notifications container -->
<div id="notifications" role="region" aria-live="assertive" aria-relevant="additions"></div>

<!-- Admin Login Modal -->
<div id="admin-login" class="modal" role="dialog" aria-modal="true" aria-labelledby="admin-login-title" aria-hidden="true">
  <div class="modal-content">
    <h2 id="admin-login-title">Admin Login</h2>
    <form id="admin-login-form" autocomplete="off" novalidate>
      <input id="admin-password" type="password" placeholder="Password" required aria-describedby="show-password-label" aria-autocomplete="none" />
      <label class="checkbox-wrapper" for="show-password-checkbox" id="show-password-label">
        <input type="checkbox" id="show-password-checkbox" />
        Show Password
      </label>
      <div class="modal-buttons">
        <button type="submit" class="btn">Login</button>
        <button type="button" class="btn btn-cancel" id="admin-login-cancel">Cancel</button>
      </div>
    </form>
  </div>
</div>

<!-- Admin Panel Modal -->
<div id="admin-panel" role="dialog" aria-modal="true" aria-labelledby="admin-panel-title" aria-hidden="true">
  <div class="admin-content">
    <h2 id="admin-panel-title">Admin Panel</h2>
    <button id="btn-update-servers" type="button">Update Servers</button>
    <button id="btn-global-message" type="button">Send Global Message</button>
    <button id="btn-reset-leaderboard" type="button">Reset Leaderboard</button>
    <button id="btn-close-admin" type="button">Close Panel</button>

    <div id="global-msg-input-container">
      <input type="text" id="global-msg-input" placeholder="Enter global message..." aria-label="Global message input" />
      <button id="btn-send-global-msg" type="button">Send</button>
    </div>
  </div>
</div>

<script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>


<script>
(() => {
  // Basic UI and Tabs
  const tabs = document.querySelectorAll(".tab-btn");
  const content = document.getElementById("content");
  const notifications = document.getElementById("notifications");
  const statsPanel = document.getElementById("stats-panel");

  // Admin login modal elements
  const adminLoginModal = document.getElementById("admin-login");
  const adminLoginForm = document.getElementById("admin-login-form");
  const adminPasswordInput = document.getElementById("admin-password");
  const showPasswordCheckbox = document.getElementById("show-password-checkbox");
  const adminLoginCancel = document.getElementById("admin-login-cancel");

  // Admin panel modal elements
  const adminPanel = document.getElementById("admin-panel");
  const btnUpdateServers = document.getElementById("btn-update-servers");
  const btnGlobalMessage = document.getElementById("btn-global-message");
  const btnResetLeaderboard = document.getElementById("btn-reset-leaderboard");
  const btnCloseAdmin = document.getElementById("btn-close-admin");
  const globalMsgInputContainer = document.getElementById("global-msg-input-container");
  const globalMsgInput = document.getElementById("global-msg-input");
  const btnSendGlobalMsg = document.getElementById("btn-send-global-msg");

  let loggedIn = false;

// Initialize socket.io with Replit backend URL
const socket = io("https://54e8d8d0-27d5-47ba-a3b6-27b89ee9c980-00-1c8ney7773dr3.kirk.replit.dev", {
  transports: ["websocket"],
}); 

  // Tabs switch handler
  function loadTabContent(tab) {
    switch (tab) {
      case "inbox":
        content.innerHTML = "<h2>Inbox</h2><div id='inbox-area'>Client requests will appear here.</div>";
        break;
      case "store":
        content.innerHTML = "<h2>Store</h2><p>Purchase upgrades and assets here.</p>";
        break;
      case "projects":
        content.innerHTML = "<h2>Projects</h2><p>Manage your current design jobs here.</p>";
        break;
      case "reviews":
        content.innerHTML = "<h2>Reviews</h2><p>Client reviews and ratings go here.</p>";
        break;
      case "settings":
        content.innerHTML = "<h2>Settings</h2><p>Adjust preferences and profile info.</p>";
        break;
      default:
        content.innerHTML = "<p>Unknown tab.</p>";
    }
  }

  function setActiveTab(tabName) {
    tabs.forEach(t => {
      const isActive = t.getAttribute("data-tab") === tabName;
      t.classList.toggle("active", isActive);
      t.setAttribute("aria-current", isActive ? "page" : "false");
    });
    loadTabContent(tabName);
  }

  tabs.forEach(tab => {
    tab.addEventListener("click", () => {
      const selectedTab = tab.getAttribute("data-tab");
      setActiveTab(selectedTab);
    });
  });

  // Default load
  setActiveTab("inbox");

  // Admin shortcut Ctrl+Shift+A to open login or panel
  document.addEventListener("keydown", e => {
    if (e.ctrlKey && e.shiftKey && e.key.toLowerCase() === 'a') {
      e.preventDefault();
      if (loggedIn) {
        openAdminPanel();
      } else {
        openAdminLogin();
      }
    }
  });

  // Show/hide admin login modal
  function openAdminLogin() {
    adminLoginModal.classList.add("active");
    adminPasswordInput.focus();
    adminLoginModal.setAttribute("aria-hidden", "false");
  }
  function closeAdminLogin() {
    adminLoginModal.classList.remove("active");
    adminLoginModal.setAttribute("aria-hidden", "true");
    adminPasswordInput.value = "";
  }

  // Show/hide admin panel modal
  function openAdminPanel() {
    adminPanel.classList.add("active");
    adminPanel.setAttribute("aria-hidden", "false");
    globalMsgInputContainer.style.display = "none";
    globalMsgInput.value = "";
  }
  function closeAdminPanel() {
    adminPanel.classList.remove("active");
    adminPanel.setAttribute("aria-hidden", "true");
  }

  adminLoginCancel.addEventListener("click", e => {
    e.preventDefault();
    closeAdminLogin();
  });

  // Show/hide password checkbox handler
  showPasswordCheckbox.addEventListener("change", () => {
    adminPasswordInput.type = showPasswordCheckbox.checked ? "text" : "password";
  });

  // Admin login form submit handler
  adminLoginForm.addEventListener("submit", e => {
    e.preventDefault();
    const pwd = adminPasswordInput.value;
    // For demo, hardcoded password check, replace with server validation in production
    if (pwd === "1234") {
      loggedIn = true;
      closeAdminLogin();
      openAdminPanel();
      showNotification("Admin login successful.", "success");
    } else {
      alert("Incorrect password.");
      adminPasswordInput.focus();
    }
  });

  // Admin panel buttons
  btnCloseAdmin.addEventListener("click", () => {
    closeAdminPanel();
  });

  btnUpdateServers.addEventListener("click", () => {
    sendAdminCommand('updateServers');
    showNotification("Server update command sent.", "info");
  });

  btnGlobalMessage.addEventListener("click", () => {
    globalMsgInputContainer.style.display = globalMsgInputContainer.style.display === "none" ? "block" : "none";
    globalMsgInput.focus();
  });

  btnSendGlobalMsg.addEventListener("click", () => {
    const msg = globalMsgInput.value.trim();
    if (msg.length > 0) {
      sendAdminCommand('globalMessage', msg);
      showNotification(`Global message sent: ${msg}`, "info");
      globalMsgInput.value = "";
      globalMsgInputContainer.style.display = "none";
    }
  });

  btnResetLeaderboard.addEventListener("click", () => {
    if (confirm("Are you sure you want to reset the leaderboard?")) {
      sendAdminCommand('resetLeaderboard');
      showNotification("Leaderboard reset command sent.", "warning");
    }
  });

  // Socket.io listeners for server events
  socket.on('globalMessage', message => {
    alert(`Global message: ${message}`);
  });

  socket.on('leaderboardReset', () => {
    alert('Leaderboard has been reset by Admin.');
  });

  socket.on('updateServers', () => {
    alert('Server has been updated.');
  });

  // Emit admin commands to server
  function sendAdminCommand(command, payload = {}) {
    socket.emit(`admin:${command}`, payload);
  }

  // Notification system (simplified)
  function showNotification(text, type = "info") {
    const notif = document.createElement("div");
    notif.className = "notification";
    notif.textContent = text;

    const closeBtn = document.createElement("button");
    closeBtn.className = "close-btn";
    closeBtn.setAttribute("aria-label", "Close notification");
    closeBtn.innerHTML = "&times;";
    closeBtn.addEventListener("click", (e) => {
      e.stopPropagation();
      notif.style.opacity = 0;
      setTimeout(() => notif.remove(), 700);
    });

    notif.appendChild(closeBtn);
    notifications.appendChild(notif);

    setTimeout(() => {
      notif.style.opacity = 0;
      setTimeout(() => notif.remove(), 700);
    }, 8000);
  }

  // Mouse vs keyboard focus ring toggling
  document.body.classList.add("using-mouse");
  window.addEventListener("mousedown", () => {
    document.body.classList.add("using-mouse");
  });
  window.addEventListener("keydown", () => {
    document.body.classList.remove("using-mouse");
  });
})();
</script>
</body>
</html>
